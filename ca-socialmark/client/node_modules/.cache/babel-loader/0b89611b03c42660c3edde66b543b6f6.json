{"remainingRequest":"C:\\Users\\casper\\Desktop\\vue-composition-api\\ca-socialmark\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\casper\\Desktop\\vue-composition-api\\ca-socialmark\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\casper\\Desktop\\vue-composition-api\\ca-socialmark\\client\\src\\composables\\BookmarkListItem.js","dependencies":[{"path":"C:\\Users\\casper\\Desktop\\vue-composition-api\\ca-socialmark\\client\\src\\composables\\BookmarkListItem.js","mtime":1666604863913},{"path":"C:\\Users\\casper\\Desktop\\vue-composition-api\\ca-socialmark\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666595224266},{"path":"C:\\Users\\casper\\Desktop\\vue-composition-api\\ca-socialmark\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1666595240169},{"path":"C:\\Users\\casper\\Desktop\\vue-composition-api\\ca-socialmark\\client\\node_modules\\eslint-loader\\index.js","mtime":1666595226387}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy9jYXNwZXIvRGVza3RvcC92dWUtY29tcG9zaXRpb24tYXBpL2NhLXNvY2lhbG1hcmsvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0IHsgaW5qZWN0LCBjb21wdXRlZCB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChpdGVtKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgYXBwQXhpb3MgPSBpbmplY3QoImFwcEF4aW9zIik7CgogIHZhciBsaWtlSXRlbSA9IGZ1bmN0aW9uIGxpa2VJdGVtKCkgewogICAgYXBwQXhpb3MoewogICAgICB1cmw6IGFscmVhZHlMaWtlZC52YWx1ZSA/ICIvdXNlcl9saWtlcy8iLmNvbmNhdChsaWtlZEl0ZW0udmFsdWUuaWQpIDogIi91c2VyX2xpa2VzIiwKICAgICAgbWV0aG9kOiBhbHJlYWR5TGlrZWQudmFsdWUgPyAiREVMRVRFIiA6ICJQT1NUIiwKICAgICAgZGF0YTogewogICAgICAgIHVzZXJJZDogX2dldEN1cnJlbnRVc2VyLnZhbHVlLmlkLAogICAgICAgIGJvb2ttYXJrSWQ6IGl0ZW0uaWQKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAodXNlcl9saWtlX3Jlc3BvbnNlKSB7CiAgICAgIHZhciBib29rbWFya3MgPSBfdG9Db25zdW1hYmxlQXJyYXkoX3VzZXJMaWtlcy52YWx1ZSk7CgogICAgICBpZiAoYWxyZWFkeUxpa2VkLnZhbHVlKSB7CiAgICAgICAgYm9va21hcmtzID0gYm9va21hcmtzLmZpbHRlcihmdW5jdGlvbiAoYikgewogICAgICAgICAgcmV0dXJuIGIuaWQgIT09IGxpa2VkSXRlbS52YWx1ZS5pZDsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBib29rbWFya3MgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGJvb2ttYXJrcyksIFt1c2VyX2xpa2VfcmVzcG9uc2UuZGF0YV0pOwogICAgICB9CgogICAgICBzdG9yZS5jb21taXQoInNldExpa2VzIiwgYm9va21hcmtzKTsKICAgIH0pOwogIH07CgogIHZhciBib29rbWFya0l0ZW0gPSBmdW5jdGlvbiBib29rbWFya0l0ZW0oKSB7CiAgICBhcHBBeGlvcyh7CiAgICAgIHVybDogYWxyZWFkeUJvb2ttYXJrZWQudmFsdWUgPyAiL3VzZXJfYm9va21hcmtzLyIuY29uY2F0KGJvb2ttYXJrZWRJdGVtLnZhbHVlLmlkKSA6ICIvdXNlcl9ib29rbWFya3MiLAogICAgICBtZXRob2Q6IGFscmVhZHlCb29rbWFya2VkLnZhbHVlID8gIkRFTEVURSIgOiAiUE9TVCIsCiAgICAgIGRhdGE6IHsKICAgICAgICB1c2VySWQ6IF9nZXRDdXJyZW50VXNlci52YWx1ZS5pZCwKICAgICAgICBib29rbWFya0lkOiBpdGVtLmlkCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJfYm9va21hcmtfcmVzcG9uc2UpIHsKICAgICAgdmFyIGJvb2ttYXJrcyA9IF90b0NvbnN1bWFibGVBcnJheShfdXNlckJvb2ttYXJrcy52YWx1ZSk7CgogICAgICBpZiAoYWxyZWFkeUJvb2ttYXJrZWQudmFsdWUpIHsKICAgICAgICBib29rbWFya3MgPSBib29rbWFya3MuZmlsdGVyKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICByZXR1cm4gYi5pZCAhPT0gYm9va21hcmtlZEl0ZW0udmFsdWUuaWQ7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYm9va21hcmtzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShib29rbWFya3MpLCBbdXNlcl9ib29rbWFya19yZXNwb25zZS5kYXRhXSk7CiAgICAgIH0KCiAgICAgIHN0b3JlLmNvbW1pdCgic2V0Qm9va21hcmtzIiwgYm9va21hcmtzKTsKICAgIH0pOwogIH07CgogIHZhciBjYXRlZ29yeU5hbWUgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2l0ZW0kY2F0ZWdvcnk7CgogICAgcmV0dXJuIChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRjYXRlZ29yeSA9IGl0ZW0uY2F0ZWdvcnkpID09PSBudWxsIHx8IF9pdGVtJGNhdGVnb3J5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRjYXRlZ29yeS5uYW1lKSB8fCAiLSI7CiAgfSk7CiAgdmFyIHVzZXJOYW1lID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9pdGVtJHVzZXI7CgogICAgcmV0dXJuIChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSR1c2VyID0gaXRlbS51c2VyKSA9PT0gbnVsbCB8fCBfaXRlbSR1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSR1c2VyLmZ1bGxuYW1lKSB8fCAiLSI7CiAgfSk7CiAgdmFyIGFscmVhZHlMaWtlZCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBCb29sZWFuKGxpa2VkSXRlbS52YWx1ZSk7CiAgfSk7CiAgdmFyIGFscmVhZHlCb29rbWFya2VkID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIEJvb2xlYW4oYm9va21hcmtlZEl0ZW0udmFsdWUpOwogIH0pOwogIHZhciBib29rbWFya2VkSXRlbSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfdXNlckJvb2ttYXJrcyR2YWx1ZTsKCiAgICByZXR1cm4gKF91c2VyQm9va21hcmtzJHZhbHVlID0gX3VzZXJCb29rbWFya3MudmFsdWUpID09PSBudWxsIHx8IF91c2VyQm9va21hcmtzJHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdXNlckJvb2ttYXJrcyR2YWx1ZS5maW5kKGZ1bmN0aW9uIChiKSB7CiAgICAgIHJldHVybiBiLmJvb2ttYXJrSWQgPT09IGl0ZW0uaWQ7CiAgICB9KTsKICB9KTsKICB2YXIgbGlrZWRJdGVtID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF91c2VyTGlrZXMkdmFsdWU7CgogICAgcmV0dXJuIChfdXNlckxpa2VzJHZhbHVlID0gX3VzZXJMaWtlcy52YWx1ZSkgPT09IG51bGwgfHwgX3VzZXJMaWtlcyR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3VzZXJMaWtlcyR2YWx1ZS5maW5kKGZ1bmN0aW9uIChiKSB7CiAgICAgIHJldHVybiBiLmJvb2ttYXJrSWQgPT09IGl0ZW0uaWQ7CiAgICB9KTsKICB9KTsKCiAgdmFyIF9nZXRDdXJyZW50VXNlciA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLl9nZXRDdXJyZW50VXNlcjsKICB9KTsKCiAgdmFyIF91c2VyTGlrZXMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RvcmUuZ2V0dGVycy5fdXNlckxpa2VzOwogIH0pOwoKICB2YXIgX3VzZXJCb29rbWFya3MgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RvcmUuZ2V0dGVycy5fdXNlckJvb2ttYXJrczsKICB9KTsKCiAgcmV0dXJuIHsKICAgIGxpa2VJdGVtOiBsaWtlSXRlbSwKICAgIGJvb2ttYXJrSXRlbTogYm9va21hcmtJdGVtLAogICAgY2F0ZWdvcnlOYW1lOiBjYXRlZ29yeU5hbWUsCiAgICB1c2VyTmFtZTogdXNlck5hbWUsCiAgICBhbHJlYWR5Qm9va21hcmtlZDogYWxyZWFkeUJvb2ttYXJrZWQsCiAgICBhbHJlYWR5TGlrZWQ6IGFscmVhZHlMaWtlZCwKICAgIGJvb2ttYXJrZWRJdGVtOiBib29rbWFya2VkSXRlbSwKICAgIGxpa2VkSXRlbTogbGlrZWRJdGVtLAogICAgX2dldEN1cnJlbnRVc2VyOiBfZ2V0Q3VycmVudFVzZXIsCiAgICBfdXNlckJvb2ttYXJrczogX3VzZXJCb29rbWFya3MsCiAgICBfdXNlckxpa2VzOiBfdXNlckxpa2VzCiAgfTsKfQ=="},{"version":3,"sources":["C:/Users/casper/Desktop/vue-composition-api/ca-socialmark/client/src/composables/BookmarkListItem.js"],"names":["inject","computed","useStore","item","store","appAxios","likeItem","url","alreadyLiked","value","likedItem","id","method","data","userId","_getCurrentUser","bookmarkId","then","user_like_response","bookmarks","_userLikes","filter","b","commit","bookmarkItem","alreadyBookmarked","bookmarkedItem","user_bookmark_response","_userBookmarks","categoryName","category","name","userName","user","fullname","Boolean","find","getters"],"mappings":"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","sourcesContent":["import { inject, computed } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nexport default function(item) {\r\n  const store = useStore();\r\n  const appAxios = inject(\"appAxios\");\r\n\r\n  const likeItem = () => {\r\n    appAxios({\r\n      url: alreadyLiked.value ? `/user_likes/${likedItem.value.id}` : \"/user_likes\",\r\n      method: alreadyLiked.value ? \"DELETE\" : \"POST\",\r\n      data: {\r\n        userId: _getCurrentUser.value.id,\r\n        bookmarkId: item.id\r\n      }\r\n    }).then(user_like_response => {\r\n      let bookmarks = [..._userLikes.value];\r\n      if (alreadyLiked.value) {\r\n        bookmarks = bookmarks.filter(b => b.id !== likedItem.value.id);\r\n      } else {\r\n        bookmarks = [...bookmarks, user_like_response.data];\r\n      }\r\n      store.commit(\"setLikes\", bookmarks);\r\n    });\r\n  };\r\n  const bookmarkItem = () => {\r\n    appAxios({\r\n      url: alreadyBookmarked.value ? `/user_bookmarks/${bookmarkedItem.value.id}` : \"/user_bookmarks\",\r\n      method: alreadyBookmarked.value ? \"DELETE\" : \"POST\",\r\n      data: {\r\n        userId: _getCurrentUser.value.id,\r\n        bookmarkId: item.id\r\n      }\r\n    }).then(user_bookmark_response => {\r\n      let bookmarks = [..._userBookmarks.value];\r\n      if (alreadyBookmarked.value) {\r\n        bookmarks = bookmarks.filter(b => b.id !== bookmarkedItem.value.id);\r\n      } else {\r\n        bookmarks = [...bookmarks, user_bookmark_response.data];\r\n      }\r\n      store.commit(\"setBookmarks\", bookmarks);\r\n    });\r\n  };\r\n  const categoryName = computed(() => item?.category?.name || \"-\");\r\n  const userName = computed(() => item?.user?.fullname || \"-\");\r\n  const alreadyLiked = computed(() => Boolean(likedItem.value));\r\n  const alreadyBookmarked = computed(() => Boolean(bookmarkedItem.value));\r\n\r\n  const bookmarkedItem = computed(() => _userBookmarks.value?.find(b => b.bookmarkId === item.id));\r\n  const likedItem = computed(() => _userLikes.value?.find(b => b.bookmarkId === item.id));\r\n  const _getCurrentUser = computed(() => store.getters._getCurrentUser);\r\n  const _userLikes = computed(() => store.getters._userLikes);\r\n  const _userBookmarks = computed(() => store.getters._userBookmarks);\r\n\r\n  return { likeItem, bookmarkItem, categoryName, userName, alreadyBookmarked, alreadyLiked, bookmarkedItem, likedItem, _getCurrentUser, _userBookmarks, _userLikes };\r\n}"]}]}